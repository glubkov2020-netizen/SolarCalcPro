{% extends "base.html" %}

{% block content %}
<!-- Подключаем Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="advantages-container">
    <!-- Hero Section -->
    <section class="advantages-hero cosmic-bg">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    <span class="gradient-text">Преимущества</span>
                    <span class="highlight-text">солнечной энергии</span>
                </h1>
                <p class="hero-subtitle">Энергия будущего, доступная уже сегодня</p>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="stat-number counter" data-target="90">0</div>
                        <div class="stat-label">% экономии</div>
                    </div>
                    <div class="hero-stat">
                        <div class="stat-number counter" data-target="25">0</div>
                        <div class="stat-label">Лет службы</div>
                    </div>
                    <div class="hero-stat">
                        <div class="stat-number counter" data-target="0">0</div>
                        <div class="stat-label">Выбросов CO₂</div>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="solar-system">
                    <div class="sun"></div>
                    <div class="orbit earth-orbit">
                        <div class="planet earth"></div>
                    </div>
                    <div class="energy-waves"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Advantages -->
    <section class="main-advantages glass-section">
        <div class="section-header">
            <h2><i class="fas fa-check-circle"></i> <span class="gradient-text">Ключевые преимущества</span></h2>
            <p class="section-subtitle">Почему солнечная энергия - это будущее уже сегодня</p>
        </div>
        
        <div class="advantages-grid">
            <div class="advantage-card primary">
                <div class="advantage-icon">
                    <i class="fas fa-sun"></i>
                </div>
                <h3>Неиссякаемый источник</h3>
                <p>Солнце будет светить еще 5 миллиардов лет, обеспечивая бесплатную энергию</p>
                <ul class="advantage-list">
                    <li><i class="fas fa-check"></i> Бесплатное "топливо"</li>
                    <li><i class="fas fa-check"></i> Доступно по всей планете</li>
                    <li><i class="fas fa-check"></i> Неисчерпаемый ресурс</li>
                </ul>
            </div>

            <div class="advantage-card secondary">
                <div class="advantage-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <h3>Экологическая чистота</h3>
                <p>Нулевые выбросы CO2 в процессе генерации электроэнергии</p>
                <ul class="advantage-list">
                    <li><i class="fas fa-check"></i> Чистая энергия</li>
                    <li><i class="fas fa-check"></i> Нулевые выбросы</li>
                    <li><i class="fas fa-check"></i> Сохранение воды</li>
                </ul>
            </div>

            <div class="advantage-card success">
                <div class="advantage-icon">
                    <i class="fas fa-ruble-sign"></i>
                </div>
                <h3>Экономическая выгода</h3>
                <p>Снижение счетов за электричество и быстрая окупаемость инвестиций</p>
                <ul class="advantage-list">
                    <li><i class="fas fa-check"></i> Снижение расходов</li>
                    <li><i class="fas fa-check"></i> Стабильные тарифы</li>
                    <li><i class="fas fa-check"></i> Возврат инвестиций</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Comparison Section -->
    <section class="comparison-section glass-section">
        <div class="section-header">
            <h2><i class="fas fa-balance-scale"></i> <span class="gradient-text">Сравнение технологий</span></h2>
            <p class="section-subtitle">Узнайте почему солнечная энергия превосходит традиционные источники</p>
        </div>
        
        <div class="comparison-container">
            <div class="comparison-chart">
                <canvas id="comparisonChart"></canvas>
            </div>
            
            <div class="comparison-table-container">
                <div class="comparison-table" id="comparisonTable">
                    <!-- Table will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Economic Benefits Calculator -->
    <section class="economic-section glass-section">
        <div class="section-header">
            <h2><i class="fas fa-chart-line"></i> <span class="gradient-text">Экономическая выгода</span></h2>
            <p class="section-subtitle">Рассчитайте вашу экономию с солнечными панелями</p>
        </div>
        
        <div class="calculator-container">
            <div class="calculator-inputs">
                <div class="input-group">
                    <label for="consumption">
                        <i class="fas fa-bolt"></i> Ежемесячное потребление
                    </label>
                    <div class="input-range">
                        <input type="range" id="consumption" min="100" max="2000" value="500" step="50">
                        <div class="range-value">
                            <span id="consumptionValue">500 кВт·ч</span>
                        </div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="tariff">
                        <i class="fas fa-ruble-sign"></i> Тариф на электроэнергию
                    </label>
                    <div class="input-range">
                        <input type="range" id="tariff" min="2" max="10" value="5" step="0.5">
                        <div class="range-value">
                            <span id="tariffValue">5 ₽/кВт·ч</span>
                        </div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="systemPower">
                        <i class="fas fa-solar-panel"></i> Мощность системы
                    </label>
                    <div class="input-range">
                        <input type="range" id="systemPower" min="1" max="20" value="5" step="0.5">
                        <div class="range-value">
                            <span id="systemPowerValue">5 кВт</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="calculator-results">
                <div class="result-card">
                    <div class="result-title">Ежемесячная экономия</div>
                    <div class="result-value">
                        <span id="monthlySavings">2,500</span> ₽
                    </div>
                    <div class="result-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="monthlyProgress"></div>
                        </div>
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">Годовая экономия</div>
                    <div class="result-value">
                        <span id="yearlySavings">30,000</span> ₽
                    </div>
                    <div class="result-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="yearlyProgress"></div>
                        </div>
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">Окупаемость</div>
                    <div class="result-value">
                        <span id="paybackPeriod">5.2</span> лет
                    </div>
                    <div class="result-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="paybackProgress"></div>
                        </div>
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">ROI за 25 лет</div>
                    <div class="result-value">
                        <span id="roi">450</span>%
                    </div>
                    <div class="result-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="roiProgress"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="calculator-chart-container">
                <canvas id="savingsChart"></canvas>
            </div>
        </div>
    </section>

    <!-- Environmental Benefits -->
    <section class="environmental-section cosmic-bg">
        <div class="section-header">
            <h2><i class="fas fa-globe-europe"></i> <span class="gradient-text">Экологические преимущества</span></h2>
            <p class="section-subtitle">Узнайте как солнечная энергия сохраняет планету</p>
        </div>
        
        <div class="environmental-content">
            <div class="co2-reduction">
                <div class="co2-meter">
                    <div class="meter-circle">
                        <div class="meter-fill"></div>
                        <div class="meter-value">100%</div>
                        <div class="meter-label">Чистая энергия</div>
                    </div>
                </div>
                
                <div class="co2-stats">
                    <div class="co2-stat">
                        <div class="stat-icon">
                            <i class="fas fa-tree"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number counter" data-target="50">0</div>
                            <div class="stat-label">Спасенных деревьев в год</div>
                        </div>
                    </div>
                    
                    <div class="co2-stat">
                        <div class="stat-icon">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number counter" data-target="12000">0</div>
                            <div class="stat-label">Км на электромобиле</div>
                        </div>
                    </div>
                    
                    <div class="co2-stat">
                        <div class="stat-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number counter" data-target="3">0</div>
                            <div class="stat-label">Дома с чистой энергией</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="environmental-chart-container">
                <canvas id="co2Chart"></canvas>
            </div>
        </div>
    </section>

    <!-- Social Benefits -->
    <section class="social-section glass-section">
        <div class="section-header">
            <h2><i class="fas fa-users"></i> <span class="gradient-text">Социальные преимущества</span></h2>
            <p class="section-subtitle">Как солнечная энергия улучшает качество жизни</p>
        </div>
        
        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h4>Энергетическая независимость</h4>
                <p>Снижение зависимости от импортных энергоресурсов и колебаний цен</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-briefcase"></i>
                </div>
                <h4>Создание рабочих мест</h4>
                <p>Новые высокотехнологичные рабочие места в регионах</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-home"></i>
                </div>
                <h4>Доступность энергии</h4>
                <p>Энергия для удаленных и труднодоступных районов</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h4>Энергобезопасность</h4>
                <p>Стабильное энергоснабжение в кризисных ситуациях</p>
            </div>
        </div>
    </section>

    <!-- Technological Benefits -->
    <section class="tech-section glass-section">
        <div class="section-header">
            <h2><i class="fas fa-microchip"></i> <span class="gradient-text">Технологические преимущества</span></h2>
            <p class="section-subtitle">Современные технологии делают солнечную энергию доступной и эффективной</p>
        </div>
        
        <div class="tech-features">
            <div class="tech-feature">
                <div class="feature-icon">
                    <i class="fas fa-cogs"></i>
                </div>
                <div class="feature-content">
                    <h4>Минимальное обслуживание</h4>
                    <p>Отсутствие движущихся частей, автоматическая работа, долгий срок службы</p>
                </div>
            </div>
            
            <div class="tech-feature">
                <div class="feature-icon">
                    <i class="fas fa-expand-arrows-alt"></i>
                </div>
                <div class="feature-content">
                    <h4>Масштабируемость</h4>
                    <p>От отдельных панелей до гигаваттных электростанций</p>
                </div>
            </div>
            
            <div class="tech-feature">
                <div class="feature-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="feature-content">
                    <h4>Умные технологии</h4>
                    <p>Интеграция с системами умного дома и мониторинга</p>
                </div>
            </div>
            
            <div class="tech-feature">
                <div class="feature-icon">
                    <i class="fas fa-battery-full"></i>
                </div>
                <div class="feature-content">
                    <h4>Накопление энергии</h4>
                    <p>Современные аккумуляторы сохраняют излишки энергии</p>
                </div>
            </div>
        </div>
    </section>
</div>

<style>
/* ===== ADVANTAGES CONTAINER ===== */
.advantages-container {
    max-width: 1400px;
    margin: 0 auto;
    background: #0f172a;
    color: white;
    min-height: 100vh;
}

/* ===== HERO SECTION ===== */
.advantages-hero {
    position: relative;
    padding: 8rem 2rem 6rem;
    background: linear-gradient(135deg, #000428 0%, #004e92 100%);
    overflow: hidden;
    min-height: 90vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.hero-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
}

.hero-title {
    font-size: 4rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.gradient-text {
    background: linear-gradient(45deg, #06b6d4, #3b82f6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.highlight-text {
    color: white;
    text-shadow: 0 0 20px rgba(6, 182, 212, 0.5);
}

.hero-subtitle {
    font-size: 1.5rem;
    opacity: 0.9;
    margin-bottom: 3rem;
    max-width: 600px;
}

.hero-stats {
    display: flex;
    gap: 3rem;
    margin-top: 3rem;
}

.hero-stat {
    text-align: center;
}

.hero-stat .stat-number {
    font-size: 3.5rem;
    font-weight: 800;
    color: #06b6d4;
    margin-bottom: 0.5rem;
    font-family: 'Arial', sans-serif;
}

.hero-stat .stat-label {
    font-size: 1rem;
    opacity: 0.8;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Solar System Animation */
.solar-system {
    position: relative;
    width: 400px;
    height: 400px;
    margin: 0 auto;
}

.sun {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 120px;
    height: 120px;
    background: radial-gradient(circle at 30% 30%, #fbbf24, #f59e0b, #dc2626);
    border-radius: 50%;
    box-shadow: 0 0 60px #f59e0b;
    animation: sun-pulse 2s ease-in-out infinite;
}

.earth-orbit {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    height: 300px;
    border: 2px solid rgba(6, 182, 212, 0.3);
    border-radius: 50%;
    animation: orbit-rotate 20s linear infinite;
}

.planet.earth {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 30px;
    background: linear-gradient(45deg, #3b82f6, #06b6d4);
    border-radius: 50%;
}

.energy-waves {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 400px;
    height: 400px;
    border-radius: 50%;
}

.energy-waves::before,
.energy-waves::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border: 2px solid rgba(6, 182, 212, 0.2);
    border-radius: 50%;
    animation: wave-expand 4s ease-out infinite;
}

.energy-waves::after {
    animation-delay: 1s;
}

/* ===== GLASS SECTIONS ===== */
.glass-section {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 32px;
    margin: 3rem 2rem;
    padding: 3rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.section-header {
    text-align: center;
    margin-bottom: 3rem;
}

.section-header h2 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.section-subtitle {
    font-size: 1.2rem;
    opacity: 0.8;
    max-width: 600px;
    margin: 0 auto;
}

/* ===== MAIN ADVANTAGES ===== */
.advantages-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
}

.advantage-card {
    padding: 2.5rem;
    border-radius: 24px;
    color: white;
    position: relative;
    overflow: hidden;
    transition: all 0.4s ease;
}

.advantage-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

.advantage-card.primary {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
}

.advantage-card.secondary {
    background: linear-gradient(135deg, #f59e0b, #d97706);
}

.advantage-card.success {
    background: linear-gradient(135deg, #10b981, #059669);
}

.advantage-icon {
    font-size: 3.5rem;
    margin-bottom: 1.5rem;
}

.advantage-card h3 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
}

.advantage-list {
    list-style: none;
    margin-top: 1.5rem;
}

.advantage-list li {
    margin-bottom: 0.75rem;
    padding: 0.5rem;
    background: rgba(255,255,255,0.1);
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.advantage-list li i {
    color: #22c55e;
}

/* ===== COMPARISON SECTION ===== */
.comparison-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    margin-top: 2rem;
}

.comparison-chart {
    height: 400px;
    background: rgba(0,0,0,0.3);
    border-radius: 20px;
    padding: 2rem;
}

.comparison-table-container {
    max-height: 400px;
    overflow-y: auto;
    background: rgba(0,0,0,0.3);
    border-radius: 20px;
    padding: 1rem;
}

.comparison-table {
    width: 100%;
    border-collapse: collapse;
}

.comparison-table th {
    background: rgba(0,0,0,0.5);
    padding: 1rem;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid rgba(255,255,255,0.1);
}

.comparison-table td {
    padding: 1rem;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.comparison-table tr:hover {
    background: rgba(255,255,255,0.05);
}

.solar-cell {
    color: #06b6d4;
    font-weight: 600;
}

.traditional-cell {
    color: #9ca3af;
}

/* ===== ECONOMIC SECTION ===== */
.calculator-container {
    display: grid;
    gap: 3rem;
}

.calculator-inputs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    background: rgba(0,0,0,0.3);
    padding: 2rem;
    border-radius: 20px;
}

.input-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.input-group label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: #06b6d4;
}

.input-range {
    position: relative;
}

.input-range input[type="range"] {
    width: 100%;
    height: 8px;
    -webkit-appearance: none;
    background: rgba(255,255,255,0.1);
    border-radius: 4px;
    outline: none;
}

.input-range input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    background: #06b6d4;
    border-radius: 50%;
    cursor: pointer;
    border: 3px solid white;
    box-shadow: 0 0 10px rgba(6, 182, 212, 0.5);
}

.range-value {
    position: absolute;
    top: -30px;
    right: 0;
    background: #06b6d4;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.9rem;
}

.calculator-results {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.result-card {
    background: rgba(255,255,255,0.05);
    padding: 1.5rem;
    border-radius: 15px;
    text-align: center;
    border-top: 4px solid #06b6d4;
    transition: all 0.3s ease;
}

.result-card:hover {
    background: rgba(255,255,255,0.1);
    transform: translateY(-5px);
}

.result-title {
    font-size: 0.9rem;
    opacity: 0.8;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.result-value {
    font-size: 2.5rem;
    font-weight: 800;
    color: #06b6d4;
    margin-bottom: 1rem;
    font-family: 'Arial', sans-serif;
}

.progress-bar {
    height: 8px;
    background: rgba(255,255,255,0.1);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #06b6d4, #3b82f6);
    border-radius: 4px;
    width: 0%;
    transition: width 1s ease;
}

.calculator-chart-container {
    height: 300px;
    background: rgba(0,0,0,0.3);
    border-radius: 20px;
    padding: 2rem;
}

/* ===== ENVIRONMENTAL SECTION ===== */
.environmental-section {
    padding: 6rem 2rem;
    margin: 4rem 2rem;
    border-radius: 32px;
    background: linear-gradient(135deg, #000428 0%, #004e92 100%);
}

.environmental-content {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 4rem;
    align-items: center;
}

.co2-reduction {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3rem;
}

.co2-meter {
    position: relative;
    width: 250px;
    height: 250px;
}

.meter-circle {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: conic-gradient(#10b981 0% 100%, rgba(255,255,255,0.1) 100% 100%);
    display: flex;
    align-items: center;
    justify-content: center;
}

.meter-circle::before {
    content: '';
    position: absolute;
    top: 20px;
    left: 20px;
    right: 20px;
    bottom: 20px;
    background: #0f172a;
    border-radius: 50%;
}

.meter-value {
    position: relative;
    z-index: 2;
    font-size: 3rem;
    font-weight: 800;
    color: #10b981;
}

.meter-label {
    position: absolute;
    bottom: 40px;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 1.2rem;
    opacity: 0.8;
}

.co2-stats {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.co2-stat {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.co2-stat .stat-icon {
    font-size: 2.5rem;
    color: #10b981;
}

.co2-stat .stat-content {
    display: flex;
    flex-direction: column;
}

.co2-stat .stat-number {
    font-size: 2.5rem;
    font-weight: 800;
    color: #10b981;
    font-family: 'Arial', sans-serif;
}

.environmental-chart-container {
    height: 300px;
    background: rgba(255,255,255,0.05);
    border-radius: 20px;
    padding: 2rem;
}

/* ===== SOCIAL SECTION ===== */
.benefits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.benefit-card {
    background: rgba(255,255,255,0.05);
    padding: 2rem;
    border-radius: 20px;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid transparent;
}

.benefit-card:hover {
    border-color: #06b6d4;
    transform: translateY(-5px);
    background: rgba(255,255,255,0.1);
}

.benefit-icon {
    font-size: 3rem;
    color: #06b6d4;
    margin-bottom: 1rem;
}

.benefit-card h4 {
    font-size: 1.3rem;
    margin-bottom: 1rem;
    color: white;
}

/* ===== TECH SECTION ===== */
.tech-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.tech-feature {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    background: rgba(255,255,255,0.05);
    padding: 2rem;
    border-radius: 20px;
    transition: all 0.3s ease;
}

.tech-feature:hover {
    background: rgba(255,255,255,0.1);
    transform: translateY(-5px);
}

.feature-icon {
    font-size: 2.5rem;
    color: #06b6d4;
    flex-shrink: 0;
}

.feature-content h4 {
    font-size: 1.3rem;
    margin-bottom: 0.5rem;
    color: white;
}

/* ===== ANIMATIONS ===== */
@keyframes sun-pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.1); }
}

@keyframes orbit-rotate {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to { transform: translate(-50%, -50%) rotate(360deg); }
}

@keyframes wave-expand {
    0% {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
    }
}

@keyframes progress-fill {
    from { width: 0%; }
    to { width: var(--target-width); }
}

/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 1200px) {
    .hero-content {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 3rem;
    }
    
    .solar-system {
        order: -1;
    }
    
    .hero-title {
        font-size: 3.5rem;
    }
}

@media (max-width: 992px) {
    .comparison-container {
        grid-template-columns: 1fr;
    }
    
    .environmental-content {
        grid-template-columns: 1fr;
        gap: 3rem;
    }
    
    .co2-reduction {
        flex-direction: row;
        justify-content: center;
        flex-wrap: wrap;
    }
}

@media (max-width: 768px) {
    .hero-title {
        font-size: 2.8rem;
    }
    
    .hero-stats {
        flex-direction: column;
        gap: 2rem;
    }
    
    .advantages-grid {
        grid-template-columns: 1fr;
    }
    
    .calculator-results {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .benefits-grid {
        grid-template-columns: 1fr;
    }
    
    .tech-features {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 576px) {
    .advantages-hero {
        padding: 6rem 1rem 4rem;
    }
    
    .hero-title {
        font-size: 2.2rem;
    }
    
    .hero-subtitle {
        font-size: 1.2rem;
    }
    
    .glass-section {
        margin: 2rem 1rem;
        padding: 2rem;
    }
    
    .solar-system {
        width: 300px;
        height: 300px;
    }
    
    .calculator-results {
        grid-template-columns: 1fr;
    }
    
    .environmental-section {
        margin: 2rem 1rem;
        padding: 4rem 1rem;
    }
}
</style>

<script>
// Полностью рабочее приложение преимуществ
class WorkingAdvantagesApp {
    constructor() {
        this.consumption = 500;
        this.tariff = 5;
        this.systemPower = 5;
        this.init();
    }

    init() {
        this.initHeroAnimations();
        this.initComparisonChart();
        this.initComparisonTable();
        this.initCalculator();
        this.initEnvironmentalChart();
        this.initAnimatedCounters();
        this.bindEvents();
    }

    initHeroAnimations() {
        // Анимация солнечной системы
        this.animateSolarSystem();
        
        // Анимация счетчиков
        document.querySelectorAll('.counter').forEach(counter => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        this.animateCounter(counter);
                        observer.unobserve(counter);
                    }
                });
            }, { threshold: 0.5 });
            
            observer.observe(counter);
        });
    }

    animateCounter(counter) {
        const target = parseFloat(counter.getAttribute('data-target'));
        const duration = 2000;
        const frameDuration = 1000 / 60;
        const totalFrames = Math.round(duration / frameDuration);
        let frame = 0;
        
        const counterAnimation = setInterval(() => {
            frame++;
            const progress = frame / totalFrames;
            const currentValue = progress * target;
            
            counter.textContent = Math.floor(currentValue);
            
            if (frame === totalFrames) {
                clearInterval(counterAnimation);
                counter.textContent = target;
            }
        }, frameDuration);
    }

    animateSolarSystem() {
        // Анимация уже реализована в CSS
    }

    initComparisonChart() {
        const ctx = document.getElementById('comparisonChart').getContext('2d');
        
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [
                    'Стоимость топлива',
                    'Выбросы CO₂',
                    'Водопотребление',
                    'Срок службы',
                    'Модульность',
                    'Независимость',
                    'Надежность',
                    'Технологичность'
                ],
                datasets: [
                    {
                        label: 'Солнечная энергия',
                        data: [10, 10, 9, 9, 9, 10, 9, 10],
                        backgroundColor: 'rgba(6, 182, 212, 0.8)',
                        borderColor: '#06b6d4',
                        borderWidth: 2
                    },
                    {
                        label: 'Традиционная энергетика',
                        data: [3, 2, 5, 7, 4, 3, 7, 6],
                        backgroundColor: 'rgba(107, 114, 128, 0.8)',
                        borderColor: '#6b7280',
                        borderWidth: 2
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'white',
                            stepSize: 2
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'white',
                            font: {
                                size: 11
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: 'white',
                            font: {
                                size: 14
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: 'white',
                        bodyColor: 'white'
                    }
                }
            }
        });
    }

    initComparisonTable() {
        const table = document.getElementById('comparisonTable');
        
        const data = [
            { parameter: 'Стоимость топлива', solar: 'Бесплатно', traditional: 'Постоянные расходы' },
            { parameter: 'Выбросы CO₂', solar: '0 г/кВт·ч', traditional: '400-1000 г/кВт·ч' },
            { parameter: 'Водопотребление', solar: 'Минимальное', traditional: 'Высокое' },
            { parameter: 'Срок службы', solar: '25+ лет', traditional: '15-20 лет' },
            { parameter: 'Модульность', solar: 'Легкое масштабирование', traditional: 'Сложное расширение' },
            { parameter: 'Независимость', solar: 'Энергетическая автономия', traditional: 'Зависимость от сетей' },
            { parameter: 'Надежность', solar: 'Высокая (нет движущихся частей)', traditional: 'Средняя' },
            { parameter: 'Технологичность', solar: 'Постоянное развитие', traditional: 'Стабильная' }
        ];
        
        let html = `
            <table>
                <thead>
                    <tr>
                        <th>Параметр</th>
                        <th>Солнечная энергия</th>
                        <th>Традиционная энергетика</th>
                    </tr>
                </thead>
                <tbody>
        `;
        
        data.forEach(row => {
            html += `
                <tr>
                    <td>${row.parameter}</td>
                    <td class="solar-cell"><i class="fas fa-check"></i> ${row.solar}</td>
                    <td class="traditional-cell"><i class="fas fa-times"></i> ${row.traditional}</td>
                </tr>
            `;
        });
        
        html += `
                </tbody>
            </table>
        `;
        
        table.innerHTML = html;
    }

    initCalculator() {
        this.initCalculatorInputs();
        this.initSavingsChart();
        this.updateCalculator();
    }

    initCalculatorInputs() {
        // Потребление
        const consumptionInput = document.getElementById('consumption');
        const consumptionValue = document.getElementById('consumptionValue');
        
        consumptionInput.addEventListener('input', () => {
            this.consumption = parseInt(consumptionInput.value);
            consumptionValue.textContent = `${this.consumption} кВт·ч`;
            this.updateCalculator();
        });
        
        // Тариф
        const tariffInput = document.getElementById('tariff');
        const tariffValue = document.getElementById('tariffValue');
        
        tariffInput.addEventListener('input', () => {
            this.tariff = parseFloat(tariffInput.value);
            tariffValue.textContent = `${this.tariff} ₽/кВт·ч`;
            this.updateCalculator();
        });
        
        // Мощность системы
        const systemPowerInput = document.getElementById('systemPower');
        const systemPowerValue = document.getElementById('systemPowerValue');
        
        systemPowerInput.addEventListener('input', () => {
            this.systemPower = parseFloat(systemPowerInput.value);
            systemPowerValue.textContent = `${this.systemPower} кВт`;
            this.updateCalculator();
        });
    }

    updateCalculator() {
        // Расчеты
        const monthlyProduction = this.systemPower * 100; // 100 часов солнца в месяц
        const solarCoverage = Math.min(monthlyProduction / this.consumption, 1);
        const monthlySavings = Math.round(this.consumption * this.tariff * solarCoverage * 0.8); // 80% эффективности
        const yearlySavings = monthlySavings * 12;
        const systemCost = this.systemPower * 60000; // 60,000 ₽ за кВт
        const paybackPeriod = (systemCost / yearlySavings).toFixed(1);
        const roi = Math.round(((yearlySavings * 25 - systemCost) / systemCost * 100));
        
        // Обновление значений
        document.getElementById('monthlySavings').textContent = monthlySavings.toLocaleString('ru-RU');
        document.getElementById('yearlySavings').textContent = yearlySavings.toLocaleString('ru-RU');
        document.getElementById('paybackPeriod').textContent = paybackPeriod;
        document.getElementById('roi').textContent = roi;
        
        // Обновление прогресс-баров
        this.updateProgressBars(monthlySavings, yearlySavings, paybackPeriod, roi);
        
        // Обновление графика
        this.updateSavingsChart(monthlySavings, systemCost);
    }

    updateProgressBars(monthly, yearly, payback, roi) {
        const monthlyPercent = Math.min(monthly / 5000 * 100, 100);
        const yearlyPercent = Math.min(yearly / 60000 * 100, 100);
        const paybackPercent = Math.min((8 - payback) / 8 * 100, 100); // Инвертировано
        const roiPercent = Math.min(roi / 500 * 100, 100);
        
        document.getElementById('monthlyProgress').style.width = `${monthlyPercent}%`;
        document.getElementById('yearlyProgress').style.width = `${yearlyPercent}%`;
        document.getElementById('paybackProgress').style.width = `${paybackPercent}%`;
        document.getElementById('roiProgress').style.width = `${roiPercent}%`;
    }

    initSavingsChart() {
        const ctx = document.getElementById('savingsChart').getContext('2d');
        
        this.savingsChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Год 1', 'Год 2', 'Год 3', 'Год 4', 'Год 5', 'Год 6', 'Год 7', 'Год 8', 'Год 9', 'Год 10'],
                datasets: [
                    {
                        label: 'Накопленная экономия',
                        data: [30000, 60000, 90000, 120000, 150000, 180000, 210000, 240000, 270000, 300000],
                        borderColor: '#06b6d4',
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'white',
                            callback: function(value) {
                                return value.toLocaleString('ru-RU') + ' ₽';
                            }
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'white'
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: 'white'
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        callbacks: {
                            label: function(context) {
                                return `Экономия: ${context.parsed.y.toLocaleString('ru-RU')} ₽`;
                            }
                        }
                    }
                }
            }
        });
    }

    updateSavingsChart(monthlySavings) {
        const years = 10;
        const savingsData = [];
        
        for (let i = 1; i <= years; i++) {
            savingsData.push(monthlySavings * 12 * i);
        }
        
        this.savingsChart.data.datasets[0].data = savingsData;
        this.savingsChart.update();
    }

    initEnvironmentalChart() {
        const ctx = document.getElementById('co2Chart').getContext('2d');
        
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Уголь', 'Газ', 'Нефть', 'Атом', 'Солнце'],
                datasets: [{
                    label: 'Выбросы CO₂ (г/кВт·ч)',
                    data: [820, 490, 650, 12, 0],
                    backgroundColor: [
                        '#ef4444',
                        '#f59e0b',
                        '#f97316',
                        '#3b82f6',
                        '#10b981'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'white'
                        },
                        title: {
                            display: true,
                            text: 'г/кВт·ч',
                            color: 'white'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'white'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ${context.parsed.y} г`;
                            }
                        }
                    }
                }
            }
        });
    }

    initAnimatedCounters() {
        // Анимация счетчиков в экологической секции
        const counters = document.querySelectorAll('.co2-stat .counter');
        
        counters.forEach(counter => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        this.animateCounter(counter);
                        observer.unobserve(counter);
                    }
                });
            }, { threshold: 0.5 });
            
            observer.observe(counter);
        });
        
        // Анимация кругового индикатора
        const meterFill = document.querySelector('.meter-fill');
        if (meterFill) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            meterFill.style.background = 'conic-gradient(#10b981 0% 100%, rgba(255,255,255,0.1) 100% 100%)';
                        }, 500);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });
            
            observer.observe(meterFill);
        }
    }

    bindEvents() {
        // Анимация при наведении на карточки
        document.querySelectorAll('.advantage-card, .benefit-card, .tech-feature').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-10px)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0)';
            });
        });
        
        // Плавная прокрутка
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId !== '#') {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });
    }
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', () => {
    window.advantagesApp = new WorkingAdvantagesApp();
});
</script>
{% endblock %}